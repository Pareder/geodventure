import { GameType } from 'types'
import StatisticBlock from './StatisticBlock'
import { getStreak, getTotalScore } from './utils'
import styles from './Profile.module.css'

type StatisticsProps = {
  games: GameType[]
  isLoading: boolean
}

export default function Statistics({ games, isLoading }: StatisticsProps) {
  const gamesCount = games.length
  const totalScore = getTotalScore(games)

  return (
    <div className={styles.statistics}>
      <StatisticBlock
        isLoading={isLoading}
        label="Total Games"
        icon={
          <svg
            width="32px"
            height="32px"
            viewBox="0 0 120 120"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g>
              <path
                fill="#FFC54D"
                d="M101,34l-0.2-1.7h-10c0.5-3.4,0.8-6.9,1-10.5c0.1-1.9-1.4-3.5-3.1-3.5H31.4c-1.8,0-3.2,1.6-3.1,3.5   c0.1,3.6,0.5,7.1,1,10.5h-10L19,34c-0.1,0.4-1.2,10.6,5.4,19.8c4.3,6,11,10.1,19.7,12.2c2.8,2.8,5.9,4.9,9.2,6.2   c-0.4,4.1-0.9,8.1-1.4,11.8h16.3c-0.6-3.8-1.1-7.7-1.5-11.8c3.3-1.2,6.4-3.3,9.2-6.2c8.7-2.1,15.4-6.2,19.7-12.2   C102.2,44.6,101,34.4,101,34z M27.3,51.3c-4.2-5.8-4.7-12.1-4.7-15.1h7.3c1.9,9.5,5.3,17.9,9.6,24.2C34.3,58.4,30.2,55.3,27.3,51.3   z M92.7,51.3c-2.9,4-7,7.1-12.2,9.1c4.4-6.4,7.7-14.7,9.6-24.2h7.3C97.4,39.2,96.8,45.5,92.7,51.3z"
              />

              <path
                fill="#C19D72"
                d="M77,98.1H43c-1,0-1.8-0.8-1.8-1.8V83.5c0-1,0.8-1.8,1.8-1.8h34c1,0,1.8,0.8,1.8,1.8v12.8   C78.8,97.3,78,98.1,77,98.1z"
              />

              <path
                fill="#A88763"
                d="M37.9,101.9h44.2c1,0,1.8-0.8,1.8-1.8v-3.8c0-1-0.8-1.8-1.8-1.8H37.9c-1,0-1.8,0.8-1.8,1.8v3.8   C36.1,101,36.9,101.9,37.9,101.9z"
              />

              <path
                fill="#FFC54D"
                d="M68,91H52c-0.7,0-1.2-0.5-1.2-1.2v-2.5c0-0.7,0.5-1.2,1.2-1.2h16c0.7,0,1.2,0.5,1.2,1.2v2.5   C69.2,90.5,68.6,91,68,91z"
              />
            </g>
          </svg>
        }
      >
        {gamesCount}
      </StatisticBlock>
      <StatisticBlock
        isLoading={isLoading}
        label="Total Points"
        icon={
          <svg
            width="32px"
            height="32px"
            viewBox="0 0 48 48"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1,18.42L22.46,44.16a2,2,0,0,0,3.07,0L47,18.42H1Z"
              fill="#299acc"
            />
            <path
              d="M36.6,3.42H11.4A4,4,0,0,0,7.87,5.53L1,18.42H47L40.13,5.53A4,4,0,0,0,36.6,3.42Z"
              fill="#38b1e7"
            />
            <path
              d="M22.08,43.38L15,18.42H33l-7.08,25A2,2,0,0,1,22.08,43.38Z"
              fill="#61c0ea"
            />
            <polygon
              points="33 18.42 15 18.42 14 3.42 34 3.42 33 18.42"
              fill="#89d0ef"
            />
          </svg>
        }
      >
        {totalScore.toLocaleString()}
      </StatisticBlock>
      <StatisticBlock
        isLoading={isLoading}
        label="Average Score"
        icon={
          <svg
            height="32px"
            width="32px"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
          >
            <path
              fill="#53E7D3"
              d="M39.256,212.266c-3.926,7.05-3.21,15.886,1.93,22.2l177.087,217.496
          c3.682,4.525,9.165,7.144,14.948,7.144c5.786,0,11.266-2.619,14.951-7.144l177.084-217.495c5.143-6.314,5.857-15.15,1.932-22.2
          L39.256,212.266L39.256,212.266z"
            />
            <g>
              <polygon
                fill="#B9F5ED"
                points="156.748,223.248 233.209,459.104 233.222,459.105 233.236,459.104 309.697,223.248 	"
              />
              <path
                fill="#B9F5ED"
                d="M426.497,211.101l-63.195-97.235c-3.59-5.521-9.671-8.843-16.19-8.843H119.335
          c-6.518,0-12.599,3.323-16.189,8.843l-63.199,97.235c-2.395,3.684-3.428,7.958-3.151,12.146h392.852
          C429.925,219.059,428.891,214.786,426.497,211.101z"
              />
            </g>
            <g>
              <path
                fill="#FFC753"
                d="M95.739,44.603C69.709,37.31,65.115,32.649,57.928,6.238c-0.905-3.325-3.886-5.628-7.285-5.628
		c-3.4,0-6.382,2.303-7.287,5.628c-7.188,26.411-11.78,31.072-37.81,38.364C2.27,45.52,0,48.544,0,51.995
		c0,3.449,2.27,6.474,5.546,7.393c26.029,7.292,30.622,11.954,37.81,38.364c0.905,3.324,3.887,5.628,7.287,5.628
		c3.399,0,6.38-2.304,7.285-5.628c7.187-26.411,11.781-31.071,37.811-38.364c3.277-0.917,5.546-3.942,5.546-7.393
		C101.285,48.544,99.016,45.52,95.739,44.603z"
              />
              <path
                fill="#FFC753"
                d="M507.403,462.687c-21.567-6.043-25.373-9.904-31.328-31.787c-0.75-2.754-3.22-4.662-6.036-4.662
		c-2.818,0-5.288,1.908-6.037,4.662c-5.954,21.884-9.762,25.745-31.328,31.787c-2.716,0.762-4.596,3.267-4.596,6.126
		s1.881,5.363,4.596,6.126c21.567,6.042,25.375,9.905,31.328,31.788c0.749,2.754,3.22,4.662,6.037,4.662
		c2.817,0,5.286-1.908,6.036-4.662c5.955-21.883,9.762-25.746,31.328-31.788c2.716-0.762,4.596-3.267,4.596-6.126
		C512,465.954,510.119,463.45,507.403,462.687z"
              />
            </g>
            <path
              fill="#D69EF0"
              d="M472.954,315.559H260.245l-2.514,3.868c-2.642,4.066-2.359,9.404,0.698,13.158l99.75,122.512
	c2.074,2.55,5.164,4.025,8.421,4.025c3.258,0,6.347-1.475,8.421-4.025l99.75-122.512c3.057-3.754,3.341-9.094,0.697-13.158
	L472.954,315.559z"
            />
            <path
              fill="#EFC7FF"
              d="M475.468,319.427l-35.597-54.774c-2.023-3.109-5.448-4.98-9.12-4.98H302.449
	c-3.67,0-7.098,1.872-9.118,4.98l-35.6,54.774c-1.348,2.074-1.93,4.48-1.775,6.84h221.288
	C477.399,323.908,476.817,321.503,475.468,319.427z"
            />
            <path
              fill="#BC81E2"
              d="M297.487,260.898c-1.655,0.857-3.099,2.131-4.153,3.754l-35.602,54.775
	c-1.348,2.073-1.931,4.479-1.774,6.84h84.018L297.487,260.898z"
            />
            <polygon
              fill="#EFC7FF"
              points="323.522,326.267 366.6,459.147 409.677,326.267 "
            />
            <path
              fill="#BC81E2"
              d="M393.224,326.267h84.021c0.155-2.36-0.426-4.766-1.777-6.84l-35.601-54.775
	c-1.054-1.624-2.497-2.899-4.155-3.754L393.224,326.267z"
            />
            <g>
              <path
                fill="#37C4B3"
                d="M426.497,211.101l-63.201-97.239c-1.875-2.882-4.436-5.145-7.378-6.669l-75.427,116.054H429.65 C429.924,219.058,428.893,214.785,426.497,211.101z"
              />
              <path
                fill="#37C4B3"
                d="M103.15,113.863l-63.203,97.238c-2.395,3.684-3.426,7.957-3.151,12.146h149.158l-75.429-116.054
		C107.584,108.716,105.024,110.98,103.15,113.863z"
              />
            </g>
            <polygon
              fill="#53E7D3"
              points="233.111,105.023 156.273,223.248 310.173,223.248 233.333,105.023 "
            />
            <polygon
              fill="#D69EF0"
              points="366.537,259.674 323.255,326.267 409.946,326.267 366.662,259.674 "
            />
          </svg>
        }
      >
        {(totalScore / gamesCount).toLocaleString()}
      </StatisticBlock>
      <StatisticBlock
        isLoading={isLoading}
        label="Day Streak"
        icon={
          <svg
            width="32px"
            height="32px"
            viewBox="0 0 36 36"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
            role="img"
          >
            <path
              fill="#F4900C"
              d="M35 19a16.96 16.96 0 0 0-1.04-5.868c-.46 5.389-3.333 8.157-6.335 6.868c-2.812-1.208-.917-5.917-.777-8.164c.236-3.809-.012-8.169-6.931-11.794c2.875 5.5.333 8.917-2.333 9.125c-2.958.231-5.667-2.542-4.667-7.042c-3.238 2.386-3.332 6.402-2.333 9c1.042 2.708-.042 4.958-2.583 5.208c-2.84.28-4.418-3.041-2.963-8.333A16.936 16.936 0 0 0 1 19c0 9.389 7.611 17 17 17s17-7.611 17-17z"
            />
            <path
              fill="#FFCC4D"
              d="M28.394 23.999c.148 3.084-2.561 4.293-4.019 3.709c-2.106-.843-1.541-2.291-2.083-5.291s-2.625-5.083-5.708-6c2.25 6.333-1.247 8.667-3.08 9.084c-1.872.426-3.753-.001-3.968-4.007A11.964 11.964 0 0 0 6 30c0 .368.023.73.055 1.09C9.125 34.124 13.342 36 18 36s8.875-1.876 11.945-4.91c.032-.36.055-.722.055-1.09c0-2.187-.584-4.236-1.606-6.001z"
            />
          </svg>
        }
      >
        {getStreak(games)}
      </StatisticBlock>
    </div>
  )
}
